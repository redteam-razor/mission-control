<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mission Control</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
:root{--green:#00ff41;--dark-green:#008f11;--bg:#0a0a0a;--panel:#0d1117;--border:#1a3a1a;--dim:#4a7a4a;--glow:0 0 10px rgba(0,255,65,.3)}
body{font-family:'Courier New',monospace;background:var(--bg);color:var(--green);height:100vh;overflow:hidden}
canvas#matrix-bg{position:fixed;top:0;left:0;width:100%;height:100%;z-index:0;opacity:.06}
#app{position:relative;z-index:1;display:flex;height:100vh}
/* Main content */
#main{flex:1;display:flex;flex-direction:column;overflow:hidden}
#header{padding:16px 24px;border-bottom:1px solid var(--border);display:flex;align-items:center;gap:16px;background:rgba(10,10,10,.85);backdrop-filter:blur(8px)}
#header h1{font-size:1.4rem;text-shadow:var(--glow);letter-spacing:2px}
#header .subtitle{color:var(--dim);font-size:.75rem}
#content{flex:1;overflow-y:auto;padding:24px;background:rgba(10,10,10,.7)}
#content::-webkit-scrollbar{width:6px}
#content::-webkit-scrollbar-thumb{background:var(--dark-green);border-radius:3px}
/* Right sidebar tabs */
#sidebar{width:64px;background:rgba(13,17,23,.9);border-left:1px solid var(--border);display:flex;flex-direction:column;align-items:center;padding-top:12px;gap:4px;backdrop-filter:blur(8px)}
.tab-btn{width:48px;height:48px;display:flex;align-items:center;justify-content:center;font-size:1.4rem;border:none;background:transparent;color:var(--dim);cursor:pointer;border-radius:8px;transition:all .2s}
.tab-btn:hover{background:rgba(0,255,65,.08);color:var(--green)}
.tab-btn.active{background:rgba(0,255,65,.12);color:var(--green);box-shadow:var(--glow)}
.tab-label{font-size:.55rem;color:var(--dim);margin-top:1px;font-family:'Courier New',monospace}
.tab-btn.active .tab-label{color:var(--green)}
/* Shared UI */
button,.btn{background:transparent;color:var(--green);border:1px solid var(--dark-green);padding:8px 16px;font-family:inherit;font-size:.8rem;cursor:pointer;border-radius:4px;transition:all .2s}
button:hover,.btn:hover{background:rgba(0,255,65,.15);box-shadow:var(--glow)}
input,textarea,select{background:rgba(0,255,65,.05);border:1px solid var(--border);color:var(--green);padding:8px 12px;font-family:inherit;font-size:.85rem;border-radius:4px;width:100%}
input:focus,textarea:focus,select:focus{outline:none;border-color:var(--dark-green);box-shadow:var(--glow)}
textarea{resize:vertical;min-height:80px}
select option{background:var(--bg);color:var(--green)}
.card{background:rgba(13,17,23,.8);border:1px solid var(--border);border-radius:8px;padding:16px;margin-bottom:12px}
.badge{display:inline-block;padding:2px 8px;border-radius:10px;font-size:.7rem;border:1px solid}
.badge.pending{border-color:#ff6;color:#ff6}
.badge.in-progress{border-color:#0af;color:#0af}
.badge.done{border-color:var(--green);color:var(--green)}
.badge.draft{border-color:#ff6;color:#ff6}
.badge.review{border-color:#0af;color:#0af}
.badge.published{border-color:var(--green);color:var(--green)}
h2{font-size:1.1rem;margin-bottom:16px;text-shadow:var(--glow);letter-spacing:1px}
.form-row{margin-bottom:12px}
.form-row label{display:block;font-size:.75rem;color:var(--dim);margin-bottom:4px}
.toolbar{display:flex;gap:8px;margin-bottom:16px;flex-wrap:wrap;align-items:center}
.empty{color:var(--dim);text-align:center;padding:40px;font-size:.85rem}
.delete-btn{background:transparent;border:1px solid #600;color:#f66;padding:4px 8px;font-size:.7rem;cursor:pointer;border-radius:3px}
.delete-btn:hover{background:rgba(255,0,0,.15)}
/* Calendar grid */
.cal-grid{display:grid;grid-template-columns:repeat(7,1fr);gap:2px}
.cal-header{text-align:center;font-size:.7rem;color:var(--dim);padding:4px}
.cal-day{aspect-ratio:1;border:1px solid var(--border);border-radius:4px;padding:4px;font-size:.65rem;position:relative;cursor:pointer;min-height:60px}
.cal-day:hover{border-color:var(--dark-green)}
.cal-day .num{font-size:.75rem;color:var(--dim)}
.cal-day.today .num{color:var(--green);font-weight:bold}
.cal-day.other{opacity:.3}
.cal-entry{background:rgba(0,255,65,.1);border-radius:2px;padding:1px 3px;margin-top:2px;font-size:.55rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;cursor:pointer}
/* Modal */
.modal-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.7);z-index:100;display:flex;align-items:center;justify-content:center}
.modal{background:var(--bg);border:1px solid var(--dark-green);border-radius:8px;padding:24px;max-width:500px;width:90%;max-height:80vh;overflow-y:auto;box-shadow:0 0 30px rgba(0,255,65,.15)}
.modal h3{margin-bottom:16px;text-shadow:var(--glow)}
.modal-actions{display:flex;gap:8px;justify-content:flex-end;margin-top:16px}
@media(max-width:768px){
  #sidebar{width:52px}
  .tab-btn{width:40px;height:40px;font-size:1.1rem}
  #content{padding:12px}
  .cal-day{min-height:40px}
}
</style>
</head>
<body>
<canvas id="matrix-bg"></canvas>
<div id="app">
  <div id="main">
    <div id="header">
      <div>
        <h1>â¬¡ MISSION CONTROL</h1>
        <div class="subtitle">REZAH COMMAND CENTER â€” NORMAN AI ONLINE</div>
      </div>
    </div>
    <div id="content"></div>
  </div>
  <div id="sidebar">
    <div class="tab-btn active" data-tab="tasks" onclick="switchTab('tasks')">âš¡<div class="tab-label">Tasks</div></div>
    <div class="tab-btn" data-tab="calendar" onclick="switchTab('calendar')">ðŸ“…<div class="tab-label">Calendar</div></div>
    <div class="tab-btn" data-tab="prompts" onclick="switchTab('prompts')">ðŸ’¬<div class="tab-label">Prompts</div></div>
    <div class="tab-btn" data-tab="documents" onclick="switchTab('documents')">ðŸ“„<div class="tab-label">Docs</div></div>
    <div class="tab-btn" data-tab="content" onclick="switchTab('content')">ðŸŽ¬<div class="tab-label">Content</div></div>
  </div>
</div>

<script>
// ---- Matrix Rain ----
const c=document.getElementById('matrix-bg'),ctx=c.getContext('2d');
function resizeCanvas(){c.width=window.innerWidth;c.height=window.innerHeight}
resizeCanvas();window.addEventListener('resize',resizeCanvas);
const chars='ã‚¢ã‚¤ã‚¦ã‚¨ã‚ªã‚«ã‚­ã‚¯ã‚±ã‚³ã‚µã‚·ã‚¹ã‚»ã‚½ã‚¿ãƒãƒ„ãƒ†ãƒˆãƒŠãƒ‹ãƒŒãƒãƒŽãƒãƒ’ãƒ•ãƒ˜ãƒ›ãƒžãƒŸãƒ ãƒ¡ãƒ¢ãƒ¤ãƒ¦ãƒ¨ãƒ©ãƒªãƒ«ãƒ¬ãƒ­ãƒ¯ãƒ²ãƒ³0123456789ABCDEF';
const fontSize=14,columns=()=>Math.floor(c.width/fontSize);
let drops=Array(columns()).fill(1);
function drawMatrix(){
  ctx.fillStyle='rgba(0,0,0,.05)';ctx.fillRect(0,0,c.width,c.height);
  ctx.fillStyle='#00ff41';ctx.font=fontSize+'px monospace';
  const cols=columns();
  if(drops.length!==cols)drops=Array(cols).fill(1);
  for(let i=0;i<cols;i++){
    const t=chars[Math.floor(Math.random()*chars.length)];
    ctx.fillText(t,i*fontSize,drops[i]*fontSize);
    if(drops[i]*fontSize>c.height&&Math.random()>.975)drops[i]=0;
    drops[i]++;
  }
}
setInterval(drawMatrix,50);

// ---- Storage helpers ----
function load(k){try{return JSON.parse(localStorage.getItem('mc_'+k))||[]}catch{return[]}}
function save(k,v){localStorage.setItem('mc_'+k,JSON.stringify(v))}
function uid(){return Date.now().toString(36)+Math.random().toString(36).slice(2,6)}

// ---- Tab switching ----
let currentTab='tasks';
function switchTab(t){
  currentTab=t;
  document.querySelectorAll('.tab-btn').forEach(b=>b.classList.toggle('active',b.dataset.tab===t));
  render();
}

// ---- Render dispatcher ----
function render(){
  const el=document.getElementById('content');
  ({tasks:renderTasks,calendar:renderCalendar,prompts:renderPrompts,documents:renderDocuments,content:renderContent})[currentTab](el);
}

// ---- 1. TASKS ----
function renderTasks(el){
  const tasks=load('tasks');
  el.innerHTML=`<h2>âš¡ TASKS</h2>
    <div class="toolbar">
      <button onclick="addTask()">+ New Task</button>
      <select id="taskFilter" onchange="render()" style="width:auto">
        <option value="all">All</option><option value="pending">Pending</option><option value="in-progress">In Progress</option><option value="done">Done</option>
      </select>
    </div>
    <div id="taskList"></div>`;
  const f=document.getElementById('taskFilter');
  const filtered=tasks.filter(t=>f.value==='all'||t.status===f.value);
  document.getElementById('taskList').innerHTML=filtered.length?filtered.map(t=>`
    <div class="card" style="display:flex;justify-content:space-between;align-items:center">
      <div>
        <div style="font-size:.9rem">${esc(t.title)}</div>
        <div style="font-size:.7rem;color:var(--dim);margin-top:4px">${t.assignee?'Assigned: '+esc(t.assignee):''} ${t.created?'â€¢ '+new Date(t.created).toLocaleDateString():''}</div>
      </div>
      <div style="display:flex;gap:6px;align-items:center">
        <span class="badge ${t.status}">${t.status}</span>
        <select onchange="updateTaskStatus('${t.id}',this.value)" style="width:auto;font-size:.7rem;padding:2px 4px">
          <option ${t.status==='pending'?'selected':''} value="pending">pending</option>
          <option ${t.status==='in-progress'?'selected':''} value="in-progress">in-progress</option>
          <option ${t.status==='done'?'selected':''} value="done">done</option>
        </select>
        <button class="delete-btn" onclick="deleteItem('tasks','${t.id}')">âœ•</button>
      </div>
    </div>`).join(''):'<div class="empty">No tasks yet. Click + New Task to begin.</div>';
}
function addTask(){showModal('New Task',`
  <div class="form-row"><label>Title</label><input id="mTitle"></div>
  <div class="form-row"><label>Assignee</label><input id="mAssignee" value="Norman (AI)"></div>
`,()=>{
  const tasks=load('tasks');
  tasks.unshift({id:uid(),title:document.getElementById('mTitle').value,assignee:document.getElementById('mAssignee').value,status:'pending',created:Date.now()});
  save('tasks',tasks);render();
})}
function updateTaskStatus(id,s){const tasks=load('tasks');const t=tasks.find(x=>x.id===id);if(t){t.status=s;save('tasks',tasks);render()}}

// ---- 2. CALENDAR ----
let calYear=2026,calMonth=1; // 0-indexed: 1=Feb
function renderCalendar(el){
  const entries=load('calendar');
  const d=new Date(calYear,calMonth,1),dow=d.getDay(),dim=new Date(calYear,calMonth+1,0).getDate();
  const prevDim=new Date(calYear,calMonth,0).getDate();
  const mName=d.toLocaleString('default',{month:'long',year:'numeric'});
  const today=new Date();
  el.innerHTML=`<h2>ðŸ“… CALENDAR</h2>
    <div class="toolbar">
      <button onclick="calNav(-1)">â—€</button>
      <span style="min-width:160px;text-align:center">${mName}</span>
      <button onclick="calNav(1)">â–¶</button>
      <button onclick="addCalEntry()" style="margin-left:auto">+ Entry</button>
    </div>
    <div class="cal-grid">
      ${['Sun','Mon','Tue','Wed','Thu','Fri','Sat'].map(d=>`<div class="cal-header">${d}</div>`).join('')}
      ${buildCalDays(dow,dim,prevDim,entries,today)}
    </div>`;
}
function buildCalDays(dow,dim,prevDim,entries,today){
  let html='';
  for(let i=0;i<dow;i++){html+=`<div class="cal-day other"><span class="num">${prevDim-dow+i+1}</span></div>`}
  for(let d=1;d<=dim;d++){
    const ds=`${calYear}-${String(calMonth+1).padStart(2,'0')}-${String(d).padStart(2,'0')}`;
    const isToday=today.getFullYear()===calYear&&today.getMonth()===calMonth&&today.getDate()===d;
    const dayEntries=entries.filter(e=>e.date===ds);
    html+=`<div class="cal-day${isToday?' today':''}" onclick="showDayEntries('${ds}')">
      <span class="num">${d}</span>
      ${dayEntries.slice(0,2).map(e=>`<div class="cal-entry">${esc(e.title)}</div>`).join('')}
      ${dayEntries.length>2?`<div class="cal-entry">+${dayEntries.length-2} more</div>`:''}
    </div>`;
  }
  const rem=(dow+dim)%7;if(rem)for(let i=1;i<=7-rem;i++){html+=`<div class="cal-day other"><span class="num">${i}</span></div>`}
  return html;
}
function calNav(dir){calMonth+=dir;if(calMonth>11){calMonth=0;calYear++}if(calMonth<0){calMonth=11;calYear--}render()}
function addCalEntry(){showModal('New Calendar Entry',`
  <div class="form-row"><label>Date</label><input id="mDate" type="date"></div>
  <div class="form-row"><label>Title</label><input id="mETitle"></div>
  <div class="form-row"><label>Description</label><textarea id="mEDesc"></textarea></div>
`,()=>{
  const entries=load('calendar');
  entries.push({id:uid(),date:document.getElementById('mDate').value,title:document.getElementById('mETitle').value,desc:document.getElementById('mEDesc').value});
  save('calendar',entries);render();
})}
function showDayEntries(ds){
  const entries=load('calendar').filter(e=>e.date===ds);
  if(!entries.length)return;
  showModal('Entries for '+ds,entries.map(e=>`<div class="card"><strong>${esc(e.title)}</strong><div style="font-size:.8rem;color:var(--dim);margin-top:4px">${esc(e.desc||'')}</div><button class="delete-btn" style="margin-top:8px" onclick="deleteItem('calendar','${e.id}')">Delete</button></div>`).join(''),null);
}

// ---- 3. PROMPTS ----
function renderPrompts(el){
  const prompts=load('prompts');
  el.innerHTML=`<h2>ðŸ’¬ PROMPT LOG</h2>
    <div class="toolbar">
      <input id="promptSearch" placeholder="Search prompts..." oninput="render()" style="max-width:300px">
      <button onclick="addPrompt()" style="margin-left:auto">+ Log Prompt</button>
    </div><div id="promptList"></div>`;
  const q=(document.getElementById('promptSearch')?.value||'').toLowerCase();
  const filtered=prompts.filter(p=>!q||p.prompt.toLowerCase().includes(q)||p.response.toLowerCase().includes(q));
  document.getElementById('promptList').innerHTML=filtered.length?filtered.map(p=>`
    <div class="card">
      <div style="font-size:.65rem;color:var(--dim);margin-bottom:6px">${new Date(p.created).toLocaleString()}</div>
      <div style="margin-bottom:8px"><strong style="color:#0f0">PROMPT:</strong> ${esc(p.prompt)}</div>
      <div><strong style="color:var(--dim)">RESPONSE:</strong> ${esc(p.response)}</div>
      <button class="delete-btn" style="margin-top:8px" onclick="deleteItem('prompts','${p.id}')">âœ•</button>
    </div>`).join(''):'<div class="empty">No prompts logged yet.</div>';
}
function addPrompt(){showModal('Log Prompt',`
  <div class="form-row"><label>Prompt</label><textarea id="mPrompt"></textarea></div>
  <div class="form-row"><label>Response</label><textarea id="mResponse"></textarea></div>
`,()=>{
  const prompts=load('prompts');
  prompts.unshift({id:uid(),prompt:document.getElementById('mPrompt').value,response:document.getElementById('mResponse').value,created:Date.now()});
  save('prompts',prompts);render();
})}

// ---- 4. DOCUMENTS ----
let editingDoc=null;
function renderDocuments(el){
  const docs=load('documents');
  if(editingDoc){
    const d=docs.find(x=>x.id===editingDoc)||{id:null,title:'',content:''};
    el.innerHTML=`<h2>ðŸ“„ ${d.id?'EDIT':'NEW'} DOCUMENT</h2>
      <div class="form-row"><label>Title</label><input id="docTitle" value="${esc(d.title)}"></div>
      <div class="form-row"><label>Content (Markdown)</label><textarea id="docContent" style="min-height:300px">${esc(d.content)}</textarea></div>
      <div class="toolbar"><button onclick="saveDoc('${d.id}')">Save</button><button onclick="editingDoc=null;render()">Cancel</button></div>`;
    return;
  }
  el.innerHTML=`<h2>ðŸ“„ DOCUMENTS</h2>
    <div class="toolbar"><button onclick="editingDoc='new';render()">+ New Document</button></div>
    <div id="docList"></div>`;
  document.getElementById('docList').innerHTML=docs.length?docs.map(d=>`
    <div class="card" style="cursor:pointer" onclick="viewDoc('${d.id}')">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <strong>${esc(d.title)}</strong>
        <div style="display:flex;gap:6px">
          <button onclick="event.stopPropagation();editingDoc='${d.id}';render()" style="font-size:.7rem;padding:4px 8px">Edit</button>
          <button class="delete-btn" onclick="event.stopPropagation();deleteItem('documents','${d.id}')">âœ•</button>
        </div>
      </div>
      <div style="font-size:.7rem;color:var(--dim);margin-top:4px">${new Date(d.updated).toLocaleDateString()} â€¢ ${d.content.length} chars</div>
    </div>`).join(''):'<div class="empty">No documents yet.</div>';
}
function saveDoc(id){
  const docs=load('documents');
  const title=document.getElementById('docTitle').value;
  const content=document.getElementById('docContent').value;
  if(id&&id!=='null'){const d=docs.find(x=>x.id===id);if(d){d.title=title;d.content=content;d.updated=Date.now()}}
  else{docs.unshift({id:uid(),title,content,created:Date.now(),updated:Date.now()})}
  save('documents',docs);editingDoc=null;render();
}
function viewDoc(id){
  const d=load('documents').find(x=>x.id===id);if(!d)return;
  showModal(d.title,`<div style="white-space:pre-wrap;font-size:.85rem;line-height:1.6">${esc(d.content)}</div>`,null);
}

// ---- 5. CONTENT ----
function renderContent(el){
  const items=load('content');
  el.innerHTML=`<h2>ðŸŽ¬ CONTENT TRACKER</h2>
    <div class="toolbar">
      <button onclick="addContent()">+ New Script</button>
      <select id="contentFilter" onchange="render()" style="width:auto">
        <option value="all">All</option><option value="draft">Draft</option><option value="review">Review</option><option value="published">Published</option>
      </select>
    </div><div id="contentList"></div>`;
  const f=document.getElementById('contentFilter');
  const filtered=items.filter(i=>f.value==='all'||i.status===f.value);
  document.getElementById('contentList').innerHTML=filtered.length?filtered.map(i=>`
    <div class="card">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px">
        <strong>${esc(i.campaign)}</strong>
        <div style="display:flex;gap:6px;align-items:center">
          <span class="badge ${i.status}">${i.status}</span>
          <select onchange="updateContentStatus('${i.id}',this.value)" style="width:auto;font-size:.7rem;padding:2px 4px">
            <option ${i.status==='draft'?'selected':''} value="draft">draft</option>
            <option ${i.status==='review'?'selected':''} value="review">review</option>
            <option ${i.status==='published'?'selected':''} value="published">published</option>
          </select>
          <button class="delete-btn" onclick="deleteItem('content','${i.id}')">âœ•</button>
        </div>
      </div>
      <div style="font-size:.7rem;color:var(--dim)">Platform: ${esc(i.platform)}</div>
      <div style="font-size:.8rem;margin-top:8px;white-space:pre-wrap;max-height:100px;overflow:hidden">${esc(i.script)}</div>
    </div>`).join(''):'<div class="empty">No content scripts yet.</div>';
}
function addContent(){showModal('New Content Script',`
  <div class="form-row"><label>Campaign Name</label><input id="mCampaign"></div>
  <div class="form-row"><label>Platform</label><input id="mPlatform" placeholder="YouTube, TikTok, Instagram..."></div>
  <div class="form-row"><label>Script</label><textarea id="mScript" style="min-height:120px"></textarea></div>
`,()=>{
  const items=load('content');
  items.unshift({id:uid(),campaign:document.getElementById('mCampaign').value,platform:document.getElementById('mPlatform').value,script:document.getElementById('mScript').value,status:'draft',created:Date.now()});
  save('content',items);render();
})}
function updateContentStatus(id,s){const items=load('content');const i=items.find(x=>x.id===id);if(i){i.status=s;save('content',items);render()}}

// ---- Shared: Modal, Delete, Escape ----
function showModal(title,body,onSave){
  const overlay=document.createElement('div');overlay.className='modal-overlay';
  overlay.innerHTML=`<div class="modal"><h3>${title}</h3>${body}<div class="modal-actions">
    ${onSave?'<button onclick="this.closest(\'.modal-overlay\')._save()">Save</button>':''}
    <button onclick="this.closest('.modal-overlay').remove()">Close</button>
  </div></div>`;
  overlay._save=()=>{onSave();overlay.remove()};
  document.body.appendChild(overlay);
}
function deleteItem(key,id){const items=load(key).filter(x=>x.id!==id);save(key,items);render();document.querySelectorAll('.modal-overlay').forEach(m=>m.remove())}
function esc(s){const d=document.createElement('div');d.textContent=s||'';return d.innerHTML}

// ---- Init ----
render();
</script>
</body>
</html>
